name: schwab_for_date_test
on:
  workflow_dispatch:
    inputs:
      for_date:
        description: "Trading date (YYYY-MM-DD, ET)"
        required: true
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: |
          python -m pip install --upgrade pip
          pip install pandas schwab-py pytz
      - name: Run test for date
        env:
          SCHWAB_APP_KEY:    ${{ secrets.SCHWAB_APP_KEY }}
          SCHWAB_APP_SECRET: ${{ secrets.SCHWAB_APP_SECRET }}
          SCHWAB_TOKEN_JSON: ${{ secrets.SCHWAB_TOKEN_JSON }}
          FOR_DATE:          ${{ inputs.for_date }}
        run: python scripts/trade/accelerator/test_schwab_for_date.py
